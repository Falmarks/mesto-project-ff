{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/scripts/api.js","webpack://mesto-project-ff/./src/scripts/index.js"],"sourcesContent":["// Темплейт карточки\r\nconst cardsTemplate = document.querySelector('#card-template').content;\r\n\r\n// Функция удаления карточки\r\nfunction deleteCard(evt) {\r\n    const cardElement = evt.target.closest('.card');\r\n    if (cardElement) {\r\n        cardElement.remove();\r\n    } else {\r\n        console.error('Card element not found');\r\n    }\r\n}\r\n\r\n// Функция создания карточки\r\nfunction createCard(cardInfo, userId, imageHandler, likeHandler, cardDeleteOnServer) {\r\n    const cardElement = cardsTemplate.querySelector('.card').cloneNode(true);\r\n    const cardDeleteButton = cardElement.querySelector('.card__delete-button');\r\n    const likeButton = cardElement.querySelector('.card__like-button');\r\n    const cardImage = cardElement.querySelector('.card__image');\r\n    const cardLikeCounter = cardElement.querySelector('.card__like-counter');\r\n    cardImage.src = cardInfo.link;\r\n    cardImage.alt = cardInfo.name;\r\n    cardElement.querySelector('.card__title').textContent = cardInfo.name;\r\n\r\n    if (cardInfo.likes.some((ures) => ures._id === userId)) {\r\n        likeButton.classList.add('card__like-button_is-active');\r\n    }\r\n\r\n    if (cardInfo.likes.length > 0) {\r\n        cardLikeCounter.textContent = cardInfo.likes.length;\r\n        cardLikeCounter.classList.remove('card__like-count_hidden');\r\n    } else {\r\n        cardLikeCounter.classList.add('card__like-count_hidden');\r\n    }\r\n\r\n    likeButton.addEventListener('click', () => likeHandler(cardInfo._id, likeButton));\r\n\r\n    if (userId !== cardInfo.owner._id) {\r\n        cardDeleteButton.style.display = 'none';\r\n    } else {\r\n        cardDeleteButton.addEventListener('click', (evt) => {\r\n            deleteCard(evt);\r\n            cardDeleteOnServer(cardInfo._id);\r\n        });\r\n    }\r\n\r\n    cardImage.addEventListener('click', () => {\r\n        imageHandler(cardInfo.link, cardInfo.name);\r\n    });\r\n\r\n    return cardElement;\r\n}\r\n\r\nexport {\r\n    createCard\r\n}","const openModal = (evt) => {\r\n    evt.classList.add('popup_is-opened');\r\n    document.addEventListener('keydown', closeModalOnEscape);\r\n};\r\n\r\nconst closeModal = (evt) => {\r\n    evt.classList.remove('popup_is-opened');\r\n    document.removeEventListener('keydown', closeModalOnEscape);\r\n};\r\n\r\nconst closeModalOnEscape = (evt) => {\r\n    if (evt.key === 'Escape') {\r\n        const currentPopup = document.querySelector('.popup_is-opened');\r\n        closeModal(currentPopup);\r\n    }\r\n}\r\n\r\nexport {\r\n    openModal,\r\n    closeModal,\r\n};","// Активация и деактивация кнопки\r\nfunction toggleButtonState(formElement, config) {\r\n    const inputElements = formElement.querySelectorAll(config.inputSelector);\r\n    const submitButton = formElement.querySelector(config.submitButtonSelector);\r\n    const isFormValid = Array.prototype.every.call(inputElements, (inputElement) => inputElement.checkValidity());\r\n\r\n    if (isFormValid) {\r\n        submitButton.disabled = false;\r\n        submitButton.classList.remove(config.inactiveButtonClass);\r\n    } else {\r\n        submitButton.disabled = true;\r\n        submitButton.classList.add(config.inactiveButtonClass);\r\n    }\r\n}\r\n\r\n// Отображение сообщений об ошибке\r\nfunction showInputError(formElement, inputElement, config) {\r\n    const errorElement = formElement.querySelector(`#${inputElement.name}-input-error`);\r\n    inputElement.classList.add(config.inputErrorClass);\r\n\r\n    if (inputElement.validity.patternMismatch) {\r\n        errorElement.textContent = inputElement.dataset.errorMessage;\r\n    } else {\r\n        errorElement.textContent = inputElement.validationMessage;\r\n    }\r\n    errorElement.classList.add(config.errorClass);\r\n}\r\n\r\n// Скрытие сообщений об ощибке\r\nfunction hideInputError(formElement, inputElement, config) {\r\n    const errorElement = formElement.querySelector(`#${inputElement.name}-input-error`);\r\n    inputElement.classList.remove(config.inputErrorClass);\r\n    errorElement.classList.remove(config.errorClass);\r\n    errorElement.textContent = '';\r\n}\r\n\r\n// Включение валидации\r\nfunction enableValidation(config) {\r\n    const formList = document.querySelectorAll(config.formSelector);\r\n    formList.forEach((formElement) => {\r\n        const inputElements = formElement.querySelectorAll(config.inputSelector);\r\n        inputElements.forEach((inputElement) => {\r\n            inputElement.addEventListener('input', () => {\r\n                if (!inputElement.checkValidity()) {\r\n                    showInputError(formElement, inputElement, config);\r\n                } else {\r\n                    hideInputError(formElement, inputElement, config);\r\n                }\r\n                toggleButtonState(formElement, config);\r\n            });\r\n        })\r\n    });\r\n}\r\n\r\n// Очистка ошибок валидации\r\nfunction clearValidation(formElement, config) {\r\n    const inputElements = formElement.querySelectorAll(config.inputSelector);\r\n    inputElements.forEach((inputElement) => {\r\n        hideInputError(formElement, inputElement, config);\r\n    });\r\n}\r\n\r\nexport {\r\n    enableValidation,\r\n    clearValidation,\r\n    toggleButtonState\r\n};","const config = {\r\n    baseUrl: 'https://nomoreparties.co/v1/wff-cohort-32',\r\n    headers: {\r\n        authorization: 'e3aec4e9-3494-45f2-a699-d5ae070bb7af',\r\n        'Content-Type': 'application/json',\r\n    },\r\n};\r\n\r\n// Обработка ответа от сервиса\r\nfunction checkResponse(res) {\r\n    if (res.ok) {\r\n        return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n}\r\n\r\n// Изменение аватара\r\nfunction updateUserAvatar(avatar) {\r\n    return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: config.headers,\r\n            body: JSON.stringify({\r\n                avatar: avatar,\r\n            }),\r\n        })\r\n        .then(checkResponse);\r\n}\r\n\r\n// Отправление данных профиля\r\nfunction patchUserInfo(name, about) {\r\n    return fetch(`${config.baseUrl}/users/me`, {\r\n            method: 'PATCH',\r\n            headers: config.headers,\r\n            body: JSON.stringify({\r\n                name,\r\n                about\r\n            }),\r\n        })\r\n        .then(checkResponse);\r\n}\r\n\r\n// Отправление данных карточки\r\nfunction postNewCard(name, link) {\r\n    return fetch(`${config.baseUrl}/cards`, {\r\n            method: 'POST',\r\n            headers: config.headers,\r\n            body: JSON.stringify({\r\n                name,\r\n                link\r\n            }),\r\n        })\r\n        .then(checkResponse);\r\n}\r\n\r\n// Удаление своей карточки\r\nfunction deleteCardUser(cardId) {\r\n    return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n            method: 'DELETE',\r\n            headers: config.headers,\r\n        })\r\n        .then(checkResponse);\r\n}\r\n\r\n// Получение данных профиля\r\nfunction getUserInfo() {\r\n    return fetch(`${config.baseUrl}/users/me`, {\r\n            method: 'GET',\r\n            headers: config.headers,\r\n        })\r\n        .then(checkResponse);\r\n}\r\n\r\n// Данные карточек\r\nfunction getCards() {\r\n    return fetch(`${config.baseUrl}/cards`, {\r\n            method: 'GET',\r\n            headers: config.headers\r\n        })\r\n        .then(checkResponse);\r\n}\r\n\r\n// Проверка лайка\r\nfunction checkLike(cardId, isLiked) {\r\n    return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n        method: isLiked ? \"PUT\" : \"DELETE\",\r\n        headers: config.headers,\r\n    }).then(checkResponse);\r\n}\r\n\r\nexport {\r\n    getCards,\r\n    getUserInfo,\r\n    deleteCardUser,\r\n    postNewCard,\r\n    patchUserInfo,\r\n    updateUserAvatar,\r\n    checkLike\r\n};","// Импорты\r\nimport '../pages/index.css';\r\nimport {\r\n    createCard\r\n} from './card';\r\nimport {\r\n    openModal,\r\n    closeModal\r\n} from './modal';\r\nimport {\r\n    enableValidation,\r\n    clearValidation,\r\n    toggleButtonState\r\n} from './validation';\r\nimport {\r\n    getCards,\r\n    updateUserAvatar,\r\n    getUserInfo,\r\n    deleteCardUser,\r\n    postNewCard,\r\n    patchUserInfo,\r\n    checkLike\r\n} from './api';\r\n\r\n// DOM узлы\r\nconst cardsContainer = document.querySelector('.places__list');\r\nconst profileAvatar = document.querySelector('.profile__image');\r\nconst profileAvatarPopup = document.querySelector('.popup_type_avatar')\r\nconst inputAvatar = document.querySelector('.popup__input_type_avatar');\r\nconst profileEditButton = document.querySelector('.profile__edit-button');\r\nconst profileTitle = document.querySelector('.profile__title');\r\nconst profileDescription = document.querySelector('.profile__description');\r\nconst newCardAddButton = document.querySelector('.profile__add-button');\r\nconst popupEditProfile = document.querySelector('.popup_type_edit');\r\nconst popupNewCard = document.querySelector('.popup_type_new-card');\r\nconst popupCaption = document.querySelector('.popup__caption');\r\nconst popupImage = document.querySelector('.popup__image');\r\nconst popupImageType = document.querySelector('.popup_type_image');\r\nconst popupFormProfile = document.forms['edit-profile'];\r\nconst popupNewCardForm = document.forms['new-place'];\r\nconst formAvatar = document.forms['edit-avatar'];\r\nconst config = {\r\n    formSelector: '.popup__form',\r\n    inputSelector: '.popup__input',\r\n    submitButtonSelector: '.popup__button',\r\n    inactiveButtonClass: 'popup__button_disabled',\r\n    inputErrorClass: 'popup__input_type_error',\r\n    errorClass: 'popup__error_visible'\r\n};\r\nlet userId;\r\n\r\n// Активация валидирования\r\nenableValidation(config);\r\n\r\n// Слушатель + Функция открытия попапа редактирования профиля\r\nprofileEditButton.addEventListener('click', () => {\r\n    clearValidation(popupFormProfile, config)\r\n    popupFormProfile.name.value = profileTitle.textContent;\r\n    popupFormProfile.description.value = profileDescription.textContent;\r\n    openModal(popupEditProfile);\r\n    toggleButtonState(popupFormProfile, config);\r\n});\r\n\r\n// Слушатель открытия формы изменения аватара\r\nprofileAvatar.addEventListener('click', () => {\r\n    clearValidation(profileAvatarPopup, config)\r\n    openModal(profileAvatarPopup);\r\n    toggleButtonState(profileAvatarPopup, config);\r\n});\r\n\r\n// Функция редактирования аватара\r\nfunction handleAvatarFormSubmit(evt, inputAvatar, popupAvatar, profileAvatar) {\r\n    evt.preventDefault();\r\n    updateUserAvatar(inputAvatar.value)\r\n        .then((userData) => {\r\n            profileAvatar.style.backgroundImage = `url(${userData.avatar})`;\r\n            closeModal(popupAvatar);\r\n        })\r\n        .catch((err) => {\r\n            console.error(`Ошибка: ${err}`);\r\n        })\r\n}\r\n// Слушатель кнопки редактирования аватара\r\nformAvatar.addEventListener('submit', (evt) => {\r\n    handleAvatarFormSubmit(evt, inputAvatar, profileAvatarPopup, profileAvatar);\r\n});\r\n\r\n// Функция идентификации пользователя\r\nfunction setUserInfo(user) {\r\n    profileTitle.textContent = user.name;\r\n    profileDescription.textContent = user.about;\r\n    profileAvatar.setAttribute('style', `background-image: url('${user.avatar}'`);\r\n    userId = user._id;\r\n};\r\n\r\n// Слушатель отправки формы попапа редактирования профиля + изменение информации на странице\r\npopupFormProfile.addEventListener('submit', (element) => {\r\n    element.preventDefault();\r\n    profileTitle.textContent = popupFormProfile.elements.name.value;\r\n    profileDescription.textContent = popupFormProfile.elements.description.value;\r\n    patchUserInfo(profileTitle.textContent, profileDescription.textContent);\r\n    closeModal(popupEditProfile);\r\n});\r\n\r\n// Слушатель закрытия модальных окон (крестик + оверлей)\r\nconst modals = document.querySelectorAll('.popup');\r\nmodals.forEach((modal) => {\r\n    modal.addEventListener('click', (evt) => {\r\n        if (evt.target.classList.contains('popup__close') || evt.target === evt.currentTarget) {\r\n            closeModal(modal);\r\n        }\r\n    })\r\n});\r\n\r\n// Слушатель + функция открытия попапа новой карточки\r\nnewCardAddButton.addEventListener('click', () => {\r\n    openModal(popupNewCard);\r\n    clearValidation(popupFormProfile, config)\r\n    toggleButtonState(popupNewCardForm, config)\r\n});\r\n\r\n// Слушатель отрисовки новой карточки\r\npopupNewCardForm.addEventListener('submit', handleAddCardFormSubmit);\r\n\r\n\r\n//Функция отрисовки новой карточки\r\nfunction handleAddCardFormSubmit(evt) {\r\n    evt.preventDefault();\r\n    const name = popupNewCardForm.elements['place-name'].value;\r\n    const link = popupNewCardForm.elements.link.value;\r\n    postNewCard(name, link)\r\n        .then((cardInfo) => {\r\n            const cardElement = createCard(cardInfo, userId, imageOpenPopup, likeHandler, deleteCardUser);\r\n            cardsContainer.prepend(cardElement);\r\n            popupNewCardForm.reset();\r\n            toggleButtonState(popupNewCardForm, config);\r\n            closeModal(popupNewCard);\r\n        })\r\n        .catch((err) => {\r\n            console.error(`Ошибка: ${err}`);\r\n        })\r\n}\r\n\r\n// Функция открытия картинок карточек\r\nconst imageOpenPopup = (link, name) => {\r\n    popupImage.src = link;\r\n    popupImage.alt = name;\r\n    popupCaption.textContent = name;\r\n    openModal(popupImageType);\r\n};\r\n\r\n// Функция отрисовки карточкек на страницу\r\nfunction renderCards(cardDataList, userId) {\r\n    cardDataList.forEach((element) => {\r\n        const cardElement = createCard(element, userId, imageOpenPopup, likeHandler, deleteCardUser);\r\n        cardsContainer.append(cardElement);\r\n    });\r\n};\r\n\r\nPromise.all([getUserInfo(), getCards()])\r\n    .then(([user, cards]) => {\r\n        setUserInfo(user);\r\n        renderCards(cards, user._id)\r\n    })\r\n    .catch((err) => {\r\n        console.log('Ошибка', err);\r\n    });\r\n\r\n//Функция лайка\r\nfunction likeHandler(cardId, likeButton) {\r\n    const isLiked = !likeButton.classList.contains('card__like-button_is-active');\r\n    checkLike(cardId, isLiked)\r\n        .then((data) => {\r\n            likeButton.classList.toggle('card__like-button_is-active');\r\n            const cardLikeCount = likeButton\r\n                .closest('.card')\r\n                .querySelector('.card__like-counter');\r\n\r\n            if (data.likes.length > 0) {\r\n                cardLikeCount.textContent = data.likes.length;\r\n                cardLikeCount.classList.remove('card__like-count_hidden');\r\n            } else {\r\n                cardLikeCount.classList.add('card__like-count_hidden');\r\n            }\r\n        })\r\n        .catch((err) => console.error(`Ошибка: ${err}`));\r\n};"],"names":["cardsTemplate","document","querySelector","content","createCard","cardInfo","userId","imageHandler","likeHandler","cardDeleteOnServer","cardElement","cloneNode","cardDeleteButton","likeButton","cardImage","cardLikeCounter","src","link","alt","name","textContent","likes","some","ures","_id","classList","add","length","remove","addEventListener","owner","style","display","evt","target","closest","console","error","deleteCard","openModal","closeModalOnEscape","closeModal","removeEventListener","key","currentPopup","toggleButtonState","formElement","config","inputElements","querySelectorAll","inputSelector","submitButton","submitButtonSelector","Array","prototype","every","call","inputElement","checkValidity","disabled","inactiveButtonClass","hideInputError","errorElement","concat","inputErrorClass","errorClass","clearValidation","forEach","baseUrl","headers","authorization","checkResponse","res","ok","json","Promise","reject","status","deleteCardUser","cardId","fetch","method","then","cardsContainer","profileAvatar","profileAvatarPopup","inputAvatar","profileEditButton","profileTitle","profileDescription","newCardAddButton","popupEditProfile","popupNewCard","popupCaption","popupImage","popupImageType","popupFormProfile","forms","popupNewCardForm","formAvatar","formSelector","validity","patternMismatch","dataset","errorMessage","validationMessage","showInputError","enableValidation","value","description","popupAvatar","avatar","preventDefault","body","JSON","stringify","userData","backgroundImage","catch","err","handleAvatarFormSubmit","element","about","elements","modal","contains","currentTarget","postNewCard","imageOpenPopup","prepend","reset","isLiked","checkLike","data","toggle","cardLikeCount","all","_ref","_ref2","user","cards","setAttribute","setUserInfo","cardDataList","append","renderCards","log"],"sourceRoot":""}